<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Attendance Report - NA BLOCK</title>
    <style>
        :root {
            --bg-gradient: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            --glass: rgba(255, 255, 255, 0.05);
            --gold-3d: linear-gradient(to bottom, #f1c40f, #d35400);
            --text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        body {
            font-family: 'Arial', sans-serif;
            background: var(--bg-gradient);
            color: #fff;
            margin: 0;
            padding: 10px;
            min-height: 100vh;
        }

        .designer-tag {
            font-weight: 900;
            font-size: 1.5rem;
            background: linear-gradient(45deg, #00f2fe, #4facfe);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.3);
            margin-bottom: 10px;
        }

        .report-card {
            background: var(--glass);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        h2 {
            text-align: center;
            font-size: 1.4rem;
            background: var(--gold-3d);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            filter: drop-shadow(2px 2px 2px #000);
            margin-bottom: 20px;
            text-transform: uppercase;
        }

        .table-container {
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.85rem;
        }

        th {
            background: rgba(255,255,255,0.1);
            color: #00f2fe;
            padding: 10px;
            text-shadow: var(--text-shadow);
        }

        td {
            padding: 10px;
            border-bottom: 1px solid rgba(255,255,255,0.05);
            text-align: center;
        }

        input {
            background: rgba(0,0,0,0.3);
            border: 1px solid #4facfe;
            color: #fff;
            padding: 5px;
            border-radius: 4px;
            width: 50px;
            text-align: center;
        }

        .mentor-input {
            width: 120px;
            font-size: 0.75rem;
        }

        .perc-bold {
            color: #2ecc71;
            font-weight: bold;
            text-shadow: 1px 1px 2px #000;
        }

        .whatsapp-btn {
            display: block;
            width: 100%;
            background: linear-gradient(45deg, #25D366, #128C7E);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 10px;
            font-weight: bold;
            font-size: 1.1rem;
            margin-top: 20px;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(37, 211, 102, 0.3);
        }

        .total-row {
            background: rgba(79, 172, 254, 0.2);
            font-weight: bold;
        }
    </style>
</head>
<body>

    <div class="designer-tag">G.N.R</div>

    <div class="report-card">
        <h2 id="reportTitle">NA BLOCK ATTENDANCE REPORT</h2>
        
        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>Sec</th>
                        <th>Str</th>
                        <th>Abs</th>
                        <th>%</th>
                        <th>Mentors (Editable)</th>
                    </tr>
                </thead>
                <tbody id="tableBody"></tbody>
                <tfoot>
                    <tr class="total-row">
                        <td>TOTAL</td>
                        <td id="tStr">0</td>
                        <td id="tAbs">0</td>
                        <td id="tPerc">0%</td>
                        <td>-</td>
                    </tr>
                </tfoot>
            </table>
        </div>

        <button class="whatsapp-btn" onclick="shareWhatsApp()">
            SEND TO WHATSAPP ‚ûî
        </button>
    </div>

    <script>
        const classData = [
            { section: "CSE-C", strength: 60, mentors: "Mr.Yogesh/Ms.Anusuya" },
            { section: "CSE-D", strength: 62, mentors: "Dr.Adrish/Mr.Govind rao" },
            { section: "CSE-E", strength: 58, mentors: "Ms.Sukanya/Mr.Pradeep" },
            { section: "CSM-A", strength: 63, mentors: "Ms.Shivani/Ms.K.Shivani" },
            { section: "IT-A", strength: 49, mentors: "Ms.Alpana Singh/Mr.Sujith" },
            { section: "ECE-A", strength: 69, mentors: "Ms.Sumayyah/Mr.Sainath" },
            { section: "ECE-B", strength: 69, mentors: "Mr.Muzammil/Ms.Anusha" },
            { section: "DS", strength: 62, mentors: "Dr.Subhasish/Ms.Jayanthi" }
        ];

        function init() {
            const body = document.getElementById('tableBody');
            classData.forEach((item, i) => {
                body.innerHTML += `
                    <tr>
                        <td style="color:#4facfe; font-weight:bold;">${item.section}</td>
                        <td>${item.strength}</td>
                        <td><input type="number" class="abs-in" value="0" oninput="calc()"></td>
                        <td class="perc-bold" id="p-${i}">100%</td>
                        <td><input type="text" class="men-in" value="${item.mentors}"></td>
                    </tr>
                `;
            });
            calc();
        }

        function calc() {
            let absInputs = document.getElementsByClassName('abs-in');
            let totalS = 0, totalA = 0;

            classData.forEach((item, i) => {
                let a = parseInt(absInputs[i].value) || 0;
                let p = ((item.strength - a) / item.strength) * 100;
                document.getElementById(`p-${i}`).innerText = p.toFixed(1) + '%';
                totalS += item.strength;
                totalA += a;
            });

            document.getElementById('tStr').innerText = totalS;
            document.getElementById('tAbs').innerText = totalA;
            let totalP = ((totalS - totalA) / totalS) * 100;
            document.getElementById('tPerc').innerText = totalP.toFixed(2) + '%';
        }

        function shareWhatsApp() {
            let date = new Date().toLocaleDateString();
            let msg = `*NA BLOCK ATTENDANCE REPORT - ${date}*\n\n`;
            
            let absInputs = document.getElementsByClassName('abs-in');
            let menInputs = document.getElementsByClassName('men-in');
            
            classData.forEach((item, i) => {
                let a = absInputs[i].value || 0;
                let p = document.getElementById(`p-${i}`).innerText;
                msg += `üìç *${item.section}* | Abs: ${a} | ${p}\n`;
            });

            msg += `\nüìä *TOTAL:* Str: ${document.getElementById('tStr').innerText} | Abs: ${document.getElementById('tAbs').innerText} | *${document.getElementById('tPerc').innerText}*\n\n`;
            msg += `_All class incharges/mentors are requested to do PCR for your respective section._\n\n`;
            msg += `*Designed by G.N.R*`;

            window.open(`https://wa.me/?text=${encodeURIComponent(msg)}`, '_blank');
        }

        init();
    </script>
</body>
</html>
