<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>G.N.R Attendance System</title>
    <style>
        :root {
            --bg-page: #0a0e14;
            --table-base: #1e1e3f; /* Unique table color */
            --gold: #ffd700;
            --neon-blue: #00f2fe;
            --high-perf: #2ecc71;  /* Green for >75% */
            --mid-perf: #f39c12;   /* Orange for 60-75% */
            --low-perf: #e74c3c;   /* Red for <60% */
        }

        body {
            font-family: 'Segoe UI', sans-serif;
            background-color: var(--bg-page);
            color: white;
            padding: 15px;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .designer-tag {
            align-self: flex-start;
            font-size: 1.4rem;
            font-weight: 900;
            background: linear-gradient(45deg, #ff00cc, #3333ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            margin-bottom: 20px;
        }

        .container {
            width: 100%;
            max-width: 650px;
            background: var(--table-base);
            border: 2px solid rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 10px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.7);
        }

        h2 {
            text-align: center;
            font-size: 1.2rem;
            color: var(--gold);
            text-shadow: 2px 2px #000;
            letter-spacing: 1px;
            margin: 10px 0;
        }

        table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0 5px;
        }

        th {
            color: var(--neon-blue);
            font-size: 0.8rem;
            padding: 10px 5px;
            text-transform: uppercase;
            border-bottom: 1px solid rgba(255,255,255,0.2);
        }

        td {
            padding: 10px 4px;
            text-align: center;
            background: rgba(255,255,255,0.03);
        }

        /* 3D Color Font for Sections */
        .section-name {
            font-weight: bold;
            color: #ff758c;
            text-shadow: 1px 1px 0px #fff, 2px 2px 0px #000;
            font-size: 0.9rem;
        }

        input {
            background: #000;
            border: 1px solid #444;
            color: white;
            padding: 6px;
            border-radius: 4px;
            text-align: center;
        }

        .abs-in { width: 40px; border-color: var(--gold); }
        .men-in { width: 120px; font-size: 0.7rem; color: #cfd8dc; }

        /* Percentage Dynamic Styles */
        .perc-cell {
            font-weight: bold;
            font-size: 0.95rem;
            text-shadow: 1px 1px 2px #000;
        }

        .total-row {
            background: rgba(0, 242, 254, 0.15) !important;
            font-weight: bold;
        }

        .wa-btn {
            width: 100%;
            padding: 15px;
            margin-top: 15px;
            background: linear-gradient(45deg, #25D366, #128C7E);
            border: none;
            border-radius: 10px;
            color: white;
            font-weight: bold;
            font-size: 1rem;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .wa-btn:active { transform: translateY(2px); }
    </style>
</head>
<body>

    <div class="designer-tag">G.N.R</div>

    <div class="container">
        <h2>NA BLOCK ATTENDANCE REPORT</h2>
        <table>
            <thead>
                <tr>
                    <th>Sec</th>
                    <th>Str</th>
                    <th>Abs</th>
                    <th>%</th>
                    <th>Mentors</th>
                </tr>
            </thead>
            <tbody id="tableBody"></tbody>
            <tfoot>
                <tr class="total-row">
                    <td>TOTAL</td>
                    <td id="tStr">0</td>
                    <td id="tAbs">0</td>
                    <td id="tPerc">0%</td>
                    <td>-</td>
                </tr>
            </tfoot>
        </table>

        <button class="wa-btn" onclick="shareToWhatsApp()">EXPORT TO WHATSAPP</button>
    </div>

    <script>
        const sections = [
            { n: "CSE-C", s: 60, m: "Mr.Yogesh/Ms.Anusuya" },
            { n: "CSE-D", s: 62, m: "Dr.Adrish/Mr.Govind rao" },
            { n: "CSE-E", s: 58, m: "Ms.Sukanya/Mr.Pradeep" },
            { n: "CSM-A", s: 63, m: "Ms.Shivani/Ms.K.Shivani" },
            { n: "IT-A", s: 49, m: "Ms.Alpana Singh/Mr.Sujith" },
            { n: "ECE-A", s: 69, m: "Ms.Sumayyah/Mr.Sainath" },
            { n: "ECE-B", s: 69, m: "Mr.Muzammil/Ms.Anusha" },
            { n: "DS", s: 62, m: "Dr.Subhasish/Ms.Jayanthi" }
        ];

        function init() {
            const tbody = document.getElementById('tableBody');
            sections.forEach((item, i) => {
                tbody.innerHTML += `
                    <tr>
                        <td class="section-name">${item.n}</td>
                        <td>${item.s}</td>
                        <td><input type="number" class="abs-in" placeholder="-" oninput="calculate()"></td>
                        <td class="perc-cell" id="p-${i}">100%</td>
                        <td><input type="text" class="men-in" value="${item.m}"></td>
                    </tr>
                `;
            });
            calculate();
        }

        function calculate() {
            const absInputs = document.querySelectorAll('.abs-in');
            const pCells = document.querySelectorAll('.perc-cell');
            let totalS = 0, totalA = 0;

            sections.forEach((item, i) => {
                let a = parseInt(absInputs[i].value) || 0;
                let p = ((item.s - a) / item.s) * 100;
                
                // Set Color Logic
                let color = 'var(--low-perf)'; // Default Red
                if (p > 75) color = 'var(--high-perf)'; // Green
                else if (p >= 60) color = 'var(--mid-perf)'; // Orange/Amber

                pCells[i].innerText = p.toFixed(1) + '%';
                pCells[i].style.color = color;

                totalS += item.s;
                totalA += a;
            });

            document.getElementById('tStr').innerText = totalS;
            document.getElementById('tAbs').innerText = totalA;
            let totalP = ((totalS - totalA) / totalS) * 100;
            const tDisplay = document.getElementById('tPerc');
            tDisplay.innerText = totalP.toFixed(2) + '%';
            
            // Total Percent Color
            tDisplay.style.color = totalP > 75 ? 'var(--high-perf)' : (totalP >= 60 ? 'var(--mid-perf)' : 'var(--low-perf)');
        }

        function shareToWhatsApp() {
            let msg = `*NA BLOCK ATTENDANCE REPORT*\n\n`;
            msg += `*Sec | Str | Abs | %*\n`;
            msg += `------------------------\n`;
            
            const absIn = document.querySelectorAll('.abs-in');
            const menIn = document.querySelectorAll('.men-in');

            sections.forEach((item, i) => {
                let a = absIn[i].value || 0;
                let p = document.getElementById(`p-${i}`).innerText;
                msg += `üìç *${item.n}* | ${item.s} | ${a} | *${p}*\n`;
                msg += `_Mentor: ${menIn[i].value}_\n\n`;
            });

            msg += `------------------------\n`;
            msg += `üìä *GRAND TOTAL:* ${document.getElementById('tStr').innerText} | ${document.getElementById('tAbs').innerText} | *${document.getElementById('tPerc').innerText}*\n\n`;
            msg += `*Notice:* All class incharges/mentors are requested to do PCR for your respective section.\n\n`;
            msg += `*Designed by G.N.R*`;

            window.open(`https://wa.me/?text=${encodeURIComponent(msg)}`, '_blank');
        }

        init();
    </script>
</body>
</html>
